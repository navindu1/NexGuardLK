<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - NexGuard</title>
    <!-- Tailwind CSS for utility classes -->
    <link href="https://cdn.jsdelivrnet.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@700&display=swap" rel="stylesheet"/>
    <!-- Chart.js for graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      /* --- DARK THEME VARIABLES --- */
      :root {
        --bg-color: #0d0d0d;
        --panel-bg-color: #1a1a1a;
        --text-primary: #f0f0f0;
        --text-secondary: #a0a0a0;
        --border-color: #2a2a2a;
        --brand-color: #afff00; /* Vibrant Lime Green */
        --brand-color-light: rgba(175, 255, 0, 0.1);
        --red-color: #ff4d4d;
        --orange-color: #ff9933;
        --blue-color: #3399ff;
      }
      body {
        font-family: "Inter", sans-serif;
        color: var(--text-primary);
        background-color: var(--bg-color);
      }
      /* --- MAIN LAYOUT STYLES --- */
      .main-wrapper {
        display: flex;
        min-height: 100vh;
      }
      .sidebar {
        width: 260px;
        background-color: var(--panel-bg-color);
        border-right: 1px solid var(--border-color);
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        flex-shrink: 0;
        position: fixed;
        height: 100%;
      }
      .content-area {
        margin-left: 260px; /* Sidebar width */
        flex-grow: 1;
        padding: 2rem;
        overflow-y: auto;
      }
      .sidebar-logo {
        color: var(--brand-color);
        font-family: 'Orbitron', sans-serif;
        font-size: 1.75rem;
        font-weight: 700;
        margin-bottom: 2.5rem;
      }
      .nav-link {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        color: var(--text-secondary);
        font-weight: 500;
        transition: all 0.2s ease;
      }
      .nav-link:hover {
        background-color: var(--border-color);
        color: var(--text-primary);
      }
      .nav-link.active {
        background-color: var(--brand-color);
        color: #0d0d0d;
        font-weight: 700;
      }
      /* --- RE-STYLED ORIGINAL COMPONENTS --- */
      .glass-panel {
        background-color: var(--panel-bg-color);
        border: 1px solid var(--border-color);
        border-radius: 12px;
      }
      .stat-card {
        transition: border-color 0.3s ease, transform 0.3s ease;
        cursor: pointer;
      }
      .stat-card:hover {
        transform: translateY(-4px);
        border-color: var(--brand-color);
      }
      .btn {
        padding: 8px 14px; border-radius: 6px; font-weight: 600;
        transition: all 0.2s; font-size: 13px; display: inline-flex;
        align-items: center; gap: 6px; border: 1px solid transparent;
      }
      .btn-approve {
        background-color: var(--brand-color);
        color: #0d0d0d;
      }
      .btn-approve:hover:not(:disabled) {
        filter: brightness(0.9);
      }
      .btn-reject {
        background-color: var(--red-color);
        color: var(--text-primary);
      }
       .btn-reject:hover:not(:disabled) {
        filter: brightness(0.9);
       }
      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .modal { display: none; }
      .modal.active { display: flex; }

      /* Your original toast and connection card styles can be adapted if needed */
      /* For now, they are not styled to keep the focus on the main layout */

    </style>
  </head>
  <body>
    <div class="main-wrapper">
      <!-- Sidebar containing navigation from your original header -->
      <aside class="sidebar">
        <div class="sidebar-logo">NexGuard</div>
        <nav class="flex flex-col gap-2">
          <a href="#" id="overview-link" class="nav-link active">
            <i class="fa-solid fa-chart-pie w-5 text-center"></i> Overview
          </a>
          <!-- Add other navigation links here if you expand -->
        </nav>
        <div class="border-t border-gray-700 my-6"></div>
        <nav class="flex flex-col gap-2 mt-auto">
          <a href="#" id="sidebar-settings-btn" class="nav-link">
            <i class="fa-solid fa-cog w-5 text-center"></i> Settings
          </a>
          <a href="#" id="sidebar-logout-btn" class="nav-link">
            <i class="fa-solid fa-sign-out-alt w-5 text-center"></i> Logout
          </a>
        </nav>
      </aside>

      <!-- Main Content area that holds all your original body content -->
      <div class="content-area">
        <header class="flex flex-col sm:flex-row justify-between sm:items-center mb-8 gap-4">
          <div>
            <h1 class="text-3xl font-bold text-white font-['Orbitron']">Admin Dashboard</h1>
            <p class="text-gray-400">Manage all aspects of NexGuard panel.</p>
          </div>
          <div class="flex items-center gap-4">
            <div id="search-bar-container" class="relative">
              <i class="fa-solid fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"></i>
              <input type="text" id="search-input" class="bg-gray-800 border border-gray-700 rounded-lg pl-12 pr-4 py-2.5 text-sm focus:outline-none focus:ring-1 focus:ring-green-400 w-full sm:w-64" placeholder="Search..."/>
            </div>
          </div>
        </header>

        <!-- Your original 9 stat cards, re-styled for the dark theme -->
        <section id="stats-section" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 xl:grid-cols-9 gap-4 sm:gap-6 mb-8">
            <!-- All 9 cards are preserved -->
            <div id="card-pending" class="stat-card glass-panel p-4 rounded-xl">
                <p class="text-sm text-gray-400">Pending</p>
                <h3 id="pending-orders-stat" class="text-2xl font-bold mt-1">0</h3>
            </div>
            <div id="card-unconfirmed" class="stat-card glass-panel p-4 rounded-xl">
                <p class="text-sm text-gray-400">Unconfirmed</p>
                <h3 id="unconfirmed-orders-stat" class="text-2xl font-bold mt-1">0</h3>
            </div>
            <div id="card-approved" class="stat-card glass-panel p-4 rounded-xl">
                <p class="text-sm text-gray-400">Approved</p>
                <h3 id="approved-orders-stat" class="text-2xl font-bold mt-1">0</h3>
            </div>
            <div id="card-rejected" class="stat-card glass-panel p-4 rounded-xl">
                <p class="text-sm text-gray-400">Rejected</p>
                <h3 id="rejected-orders-stat" class="text-2xl font-bold mt-1">0</h3>
            </div>
            <div id="card-users" class="stat-card glass-panel p-4 rounded-xl">
                <p class="text-sm text-gray-400">Users</p>
                <h3 id="total-users-stat" class="text-2xl font-bold mt-1">0</h3>
            </div>
            <div id="card-resellers" class="stat-card glass-panel p-4 rounded-xl">
                <p class="text-sm text-gray-400">Resellers</p>
                <h3 id="total-resellers-stat" class="text-2xl font-bold mt-1">0</h3>
            </div>
            <div id="card-connections" class="stat-card glass-panel p-4 rounded-xl">
                <p class="text-sm text-gray-400">Connections</p>
                <h3 class="text-xl font-bold text-gray-200 mt-1">Manage</h3>
            </div>
            <div id="card-plans" class="stat-card glass-panel p-4 rounded-xl">
                <p class="text-sm text-gray-400">Plans</p>
                <h3 class="text-xl font-bold text-gray-200 mt-1">Manage</h3>
            </div>
            <div id="card-reports" class="stat-card glass-panel p-4 rounded-xl">
                <p class="text-sm text-gray-400">Reports</p>
                <h3 class="text-xl font-bold text-gray-200 mt-1">Generate</h3>
            </div>
        </section>

        <!-- Your original main content area, now styled for dark theme -->
        <main id="main-content-area" class="glass-panel p-6">
          <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-4 gap-4">
            <h2 id="content-title" class="text-xl font-bold text-white"></h2>
            <div class="flex items-center gap-4">
              <div id="auto-reload-container" class="flex items-center gap-2">
                <label for="auto-reload-checkbox" class="text-xs text-gray-400 cursor-pointer">Auto-reload</label>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" id="auto-reload-checkbox" class="sr-only peer">
                  <div class="w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500"></div>
                </label>
              </div>
              <button id="manual-reload-btn" class="text-gray-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-700">
                <i class="fa-solid fa-sync"></i>
              </button>
              <button id="add-new-btn" class="btn btn-approve">
                <i class="fa-solid fa-plus"></i> Add New
              </button>
            </div>
          </div>
          <div id="content-container" class="space-y-4 text-gray-300">
             <!-- Your JS will populate this area -->
          </div>
        </main>
      </div>
    </div>

    <!-- All your modals, re-styled for the dark theme -->
    <div id="image-modal" class="modal fixed inset-0 bg-black/80 justify-center items-center z-50 p-4">
      <div class="p-2 bg-gray-900 border border-gray-700 rounded-lg max-w-4xl max-h-[90vh] relative shadow-2xl">
        <button class="modal-close-btn absolute -top-4 -right-4 w-10 h-10 bg-red-600 rounded-full text-white text-xl z-10">&times;</button>
        <img id="modal-image" src="" alt="Proof" class="max-w-full max-h-[85vh] object-contain rounded"/>
      </div>
    </div>
    <div id="settings-modal" class="modal fixed inset-0 bg-black/80 justify-center items-center z-50 p-4">
      <div class="glass-panel w-full max-w-2xl p-6 rounded-lg relative">
        <button class="modal-close-btn absolute top-4 right-4 text-gray-400 hover:text-gray-200 text-2xl">&times;</button>
        <h3 class="text-xl font-bold mb-6 text-white font-['Orbitron']">Application Settings</h3>
        <div id="settings-modal-content" class="space-y-4 max-h-[70vh] overflow-y-auto"></div>
        <button id="settings-modal-save-btn" class="btn btn-approve w-full justify-center mt-6">Save Settings</button>
      </div>
    </div>
    <div id="form-modal" class="modal fixed inset-0 bg-black/80 justify-center items-center z-50 p-4">
      <div class="glass-panel w-full max-w-lg p-6 rounded-lg relative">
        <button class="modal-close-btn absolute top-4 right-4 text-gray-400 hover:text-gray-200 text-2xl">&times;</button>
        <h3 id="form-modal-title" class="text-xl font-bold mb-6 text-white font-['Orbitron']"></h3>
        <form id="form-modal-content" class="space-y-4 max-h-[70vh] overflow-y-auto"></form>
        <button id="form-modal-save-btn" class="btn btn-approve w-full justify-center mt-6">Save Changes</button>
      </div>
    </div>

    <!-- Your original JS file link -->
    <script src="/js/admin.js"></script>
    <script>
      // Simple script to link sidebar buttons to your existing modal triggers
      // This helps avoid changing your original JS file
      const settingsBtn = document.getElementById('settings-btn'); // Assuming this exists in your admin.js logic
      const logoutBtn = document.getElementById('logout-btn'); // Assuming this exists

      document.getElementById('sidebar-settings-btn').addEventListener('click', (e) => {
        e.preventDefault();
        // Find and click the original settings button if it exists and is used for the modal
        // Or directly trigger the modal opening logic from your admin.js
        if (document.getElementById('settings-modal')) {
           document.getElementById('settings-modal').classList.add('active');
        }
      });
      document.getElementById('sidebar-logout-btn').addEventListener('click', (e) => {
        e.preventDefault();
        // Trigger your logout logic, e.g., show a confirmation modal or call a function
        alert('Logout logic should be triggered here.');
      });

      // Show/hide search bar based on original logic if needed
      document.getElementById('search-bar-container').classList.remove('hidden');

    </script>
  </body>
</html>

